// using the process of going through all my files and running processimage over it.
// adding it to the prompt:
// Use this array of things to find the most similiar ones in the verctor database.
// than give back the  most suitables ones.
//  In parallel one suggested tag should be generated.
// frontend no changes just give back the filtered tag array.
// and join it with the one generated tag.
// add to folder:
// copy to de\b
// process image
// mutate image data -> files
// where is the loop feedback
// process image -> tags
// tft 101 => learning
// tags | resp
// x    | 1
// y    | 0
// z    | 1
// would i tweak the model or the prompt? => the propmt -> actually embedding?
// so must be general things that apply to all files?
// db : [embedding, tags] -> correct -> [+1, +1]
// -> wrong [different tags or propmts]  skip for now
// how are the tags created frp description
// why not send embedding
// for tags and title
// submit tags function
// sql: database which  tag where which  where right update embedding of tag
// tsne to compare
// use the current tsne as placeholder for are that tsne picture embedding compare to other embedding
// embed tags
// compare to embedding of image
// validate tag update
// embeddding focus on correct branch first
// vec1 = embed(tag[0])
// vec2 = embed(image)
// cos sim ([vec1]. [vec2])
// or tsne ([vec1], [vec2])
// maybe just ml-pca
// oh wait wheree do i get the new embedding from right now i am getting pixels orders by closeness bacl
// compare embedding

import { z } from "zod";
import { generateObject } from "ai";
import { createOpenAI } from "@ai-sdk/openai";
import { truncateLog } from "./utils";

const getMetadata = async (
  prompt: string,
  comment: any
): Promise<{ tags: string[]; title: string }> => {
  try {
    const { object } = (await generateObject({
      schema: z.object({ tags: z.array(z.string()), title: z.string() }),
      model: createOpenAI({ apiKey: process.env.OPENAI_API_KEY })("gpt-4o"),
      prompt: `${comment}${prompt}`,
    })) as { object: { tags: string[]; title: string } };
    return object;
  } catch (error) {
    throw new Error(
      truncateLog("Error getting metadata: " + (error as Error).message)
    );
  }
};

async function main() {
  const comment =
    "A fantastical scene with diverse characters, mythical creatures, and celestial elements in a detailed, surreal environment.";
  const sampleTags = [
    "screenshot",
    "passport",
    "document",
    "bill",
    "family",
    "city",
    "vacation",
    "landscape",
    "pet",
    "art",
    "male",
    "female",
  ];
  const embedding = [
    -0.005242177, -0.002374092, -0.011186345, -0.0052031777, -0.01505379,
    0.008352384, -0.031147566, -0.017016763, 0.016249774, -0.018277746,
    0.0050146803, 0.011088845, 0.012811322, 0.0024082165, 0.014702795,
    0.00932737, 0.04154742, -0.013883807, 0.018186746, -0.018420743,
    0.000251059, -0.00504393, -0.0054241745, 0.0015453534, -0.018316746,
    -0.014273801, 0.025492646, -0.0358535, 0.025947638, -0.021605698,
    0.008664379, -0.015001791, -0.0047644335, -0.025648642, -0.021215705,
    -0.0011252968, 0.020994708, -0.0051966775, -0.00035322946, 0.0058369185,
    0.0064934096, -0.005576922, -0.000591898, -0.009262371, 0.0042931903,
    -0.009047874, 0.0043386896, -0.0063601616, -0.0044979374, 0.034917515,
    0.021371702, 0.012343328, -0.033565532, -0.034189522, 0.0004326502,
    -0.0031329563, -0.009431369, 0.011927334, 0.02077371, -0.008014388,
    -0.003444952, -0.017263759, -0.01003586, -0.008124887, 0.0077218926,
    -0.015235788, -0.018199746, 0.0051284283, -0.017796753, -0.013441813,
    0.02727362, 0.028937597, -0.0071889, -0.008014388, 0.01502779, -0.01938273,
    -0.017679755, 0.0033897029, -0.0007300211, 0.0036756988, 0.006252913,
    -0.0076763933, -0.008306884, 0.011121345, 0.01218733, 0.0052681766,
    -0.023308676, 0.014676795, 0.00047124343, -0.014585797, 0.008924375,
    -0.0059539173, 0.009658866, 0.02445266, -0.013246816, 0.0015762281,
    -0.0012593574, 0.03517751, 0.007611394, -0.018498743, 0.0010570477,
    -0.014949792, -0.021592699, -0.01074435, -0.014923792, -0.026987623,
    0.01006186, 0.01292182, 0.037517477, -0.02082571, -0.020552713, 0.026246635,
    0.009496368, -0.023412675, -0.0011724212, 0.006405661, 0.03226555,
    0.01502779, 0.0143778, -0.032005556, -0.011738837, 0.012551325,
    -0.012414827, 0.0020377217, 0.024699656, 0.026805626, 0.0143258,
    -0.021839695, -0.014143803, -0.008963375, 0.02432266, 0.003519701,
    0.018706739, -0.0010895473, -0.015963778, 0.0027803362, -0.01803075,
    0.026259635, 0.00083442585, -0.0032044554, 0.026493631, 0.020370716,
    -0.016002778, 0.0032353299, 0.0012463577, 0.016886765, -0.004884682,
    0.01938273, -0.012070332, -0.031953555, 0.010646852, -0.010256857,
    0.008163886, 0.014286801, 0.0038739461, -0.008248385, -0.031173566,
    0.029483588, -0.00646416, -0.010172359, -0.003730948, 0.01936973,
    -0.010471354, -0.019954722, 0.025544643, 0.024270661, 0.003306829,
    0.011186345, -0.01938273, 0.00084417575, -0.0077088927, 0.01077035,
    -0.028885597, 0.008066388, -0.030913569, 0.014208802, 0.0036886986,
    0.008768378, -0.01649677, -0.012460327, -0.018121747, -0.0068574045,
    0.006389411, -0.007416397, -0.016353773, -0.00787789, 0.0049886806,
    -0.0104258545, 0.0058564185, -0.005297426, -0.0040429435, 0.033305537,
    -0.0040396936, -0.011751836, -0.67058265, 0.00025065275, -0.0032044554,
    -0.029483588, -0.006538909, 0.015612783, 0.0071629, 0.0104453545,
    0.0033198288, -0.025622644, -0.013181817, 0.0068444046, -0.005069929,
    0.007962389, -0.019486729, -0.020617712, -0.037907474, -0.01216133,
    0.001321919, -0.004143692, -0.015859779, -0.0034222023, -0.0009969237,
    -0.0082808845, 0.0007832391, 0.00861238, 0.025388647, 0.00788439,
    0.012128831, 0.0065584085, -0.027065624, 0.007468396, -0.0042834403,
    0.030419577, 0.041235425, -0.0014242927, -0.022138692, 0.032733545,
    0.0043419395, 0.031901557, -0.009964361, -0.001544541, 0.034839515,
    -0.015222788, -0.02451766, 0.00860588, 0.030263579, -0.027039623,
    0.015599783, 0.007546395, 0.02724762, -0.006525909, 0.02295768,
    0.0103218565, 0.023360675, -0.002653588, 0.023750668, -0.0031703308,
    0.0040624435, 0.0050666793, -0.0061586644, 0.008170386, -0.028183607,
    -0.005391675, -0.010289357, 0.0029054596, -0.024621656, 0.008859376,
    0.0016769767, -0.026142636, 0.035931498, 0.025882639, -0.011316342,
    0.007513895, -0.0039941943, 0.007624394, 0.025726642, -0.0060709156,
    0.015287787, 0.014520798, 0.014455799, -0.01006186, -0.014806794,
    -0.015001791, 0.019876722, -0.016652768, -0.01648377, 0.0108158495,
    0.013181817, -0.0049854307, 0.012772322, 0.007117401, -0.013058318,
    -0.0067014066, 0.019005734, 0.030081581, -0.017653754, 0.019278731,
    -0.0014324175, -0.015157789, 0.025336647, -0.03879146, 0.00024943403,
    -0.015131789, 0.0042054416, -0.0018053498, -0.028859599, 0.023828669,
    0.031979553, -0.016249774, 0.003951945, 0.00005057742, -0.014117803,
    -0.005862918, 0.021748697, -0.021020707, 0.019096734, 0.008664379,
    -0.0038999456, -0.012863321, 0.019915722, 0.013896806, 0.007247399,
    -0.004397189, -0.012278329, 0.0106923515, -0.0007263649, -0.022775684,
    -0.015248788, -0.001793975, 0.009840863, 0.03226555, 0.015001791,
    -0.011803836, 0.026337633, -0.0085278815, 0.01868074, -0.0015006666,
    0.008963375, -0.0216187, -0.015248788, 0.0071369004, -0.008547381,
    -0.0047871834, -0.008631879, -0.02585664, -0.019629726, 0.024543658,
    -0.0360615, 0.014910792, -0.024257662, -0.0030793322, -0.013454813,
    -0.008696879, -0.0034189525, -0.0029850835, -0.011595839, -0.014429799,
    -0.016574768, -0.0019093484, 0.023555672, -0.0077998913, -0.029093595,
    -0.0015193538, -0.015144789, -0.0050016805, -0.01575578, 0.02722162,
    -0.013493812, -0.028079608, -0.016600769, -0.013168816, 0.004247691,
    0.03658149, -0.012544826, 0.010620852, -0.01792675, -0.028833598,
    -0.011095345, -0.007390397, 0.0028924597, 0.011381341, -0.011179844,
    -0.020695712, 0.037673473, 0.000571992, 0.019499728, 0.020565713,
    0.013025818, 0.021462701, -0.0073513975, 0.02437466, 0.008098887,
    0.0039031957, -0.009073874, -0.0021140955, -0.0029769586, -0.016431771,
    0.0035359508, 0.028625602, 0.026623629, 0.020461716, 0.022814682,
    0.010900348, 0.013090817, -0.027611615, 0.0037244482, -0.010776849,
    0.01363681, 0.0007877078, 0.014468798, -0.023607671, -0.00934037,
    -0.0114983395, 0.004085193, 0.037699476, 0.02221669, -0.013480812,
    0.0072928984, -0.0068314048, 0.0064154104, -0.016977763, 0.008040388,
    0.007045902, -0.017523756, 0.008170386, 0.01361081, -0.0021855945,
    -0.000069620124, -0.004588936, -0.007533395, 0.0030565825, -0.013597811,
    0.023308676, -0.010711851, 0.008781377, -0.011075846, -0.015872778,
    0.004007194, -0.004709184, 0.025271649, 0.027143622, 0.025271649,
    -0.0054209246, 0.019980721, 0.013025818, 0.019070735, -0.016210774,
    -0.033461533, -0.015547783, -0.01938273, -0.00575242, -0.008963375,
    0.001471417, 0.026220635, -0.0049106814, 0.01146584, 0.007819391,
    0.019148733, 0.03281154, 0.027013624, -0.019668726, 0.041937415,
    0.029379591, 0.017367758, 0.0048326827, -0.017757753, 0.0030695822,
    -0.0088983765, 0.0008685504, -0.006516159, -0.02740362, 0.0054729236,
    -0.0031963305, 0.005378675, -0.015144789, 0.0043549393, 0.0073513975,
    -0.011719337, 0.013714809, -0.02381567, -0.039675448, -0.0012406702,
    0.021137705, 0.014728795, -0.0125903245, -0.03499551, 0.027507616,
    0.014052805, 0.007962389, 0.004959431, 0.016184775, 0.0006556784,
    -0.0014852294, -0.0050861794, -0.028781598, 0.0040754434, 0.0020019722,
    -0.008950375, -0.020851709, -0.0043419395, -0.004748184, 0.016613768,
    0.0026779626, 0.036789488, -0.015716782, -0.021124706, -0.00431269,
    0.0002618245, -0.00859288, -0.0043484396, -0.010939348, -0.013162317,
    -0.02735162, 0.0215667, 0.0057621696, -0.020981709, -0.002367592,
    0.020487715, 0.012349828, 0.011329343, -0.018745739, -0.013168816,
    0.008696879, 0.093910694, 0.017666753, -0.0093728695, 0.031745557,
    -0.0023464672, 0.017302759, -0.01364981, -0.005297426, 0.003812197,
    0.008365383, -0.003366953, -0.0070004025, 0.02232069, 0.02008472,
    0.00043386896, -0.0013787933, -0.0034644518, 0.0040429435, 0.0097238645,
    -0.0063374117, -0.011277343, -0.020305717, 0.013480812, 0.0287036,
    -0.010003361, -0.04009144, 0.027923612, 0.010939348, -0.00029188656,
    -0.022411687, -0.010126859, 0.0121158315, -0.017588755, 0.00503418,
    -0.005661421, -0.0011634838, 0.021969695, 0.019525727, 0.0015339786,
    -0.008963375, 0.013441813, -0.0020409715, 0.009099873, -0.035307508,
    0.010653351, -0.003165456, -0.007832391, 0.009015375, 0.001291857,
    0.012811322, 0.016574768, 0.0009831113, 0.0070004025, -0.017484756,
    0.02083871, 0.001117172, 0.010835349, 0.0015226038, 0.00030041768,
    -0.011348842, -0.001860599, -0.0121158315, 0.008196386, -0.005537923,
    -0.023607671, -0.019460728, -0.01640577, -0.011862335, -0.025895638,
    0.009470368, -0.012271829, -0.016717767, -0.0019613476, -0.0050016805,
    0.020500714, -0.0057946695, 0.011316342, -0.011777836, 0.03676349,
    -0.014468798, -0.013045318, -0.026935624, -0.018888736, -0.02358167,
    -0.009684865, 0.008241885, 0.027923612, 0.0077023925, -0.010133359,
    0.004166442, 0.0064869095, -0.019603727, 0.016834766, -0.001941848,
    0.00060246035, 0.014338801, 0.003077707, -0.005804419, 0.00022932493,
    0.0067274063, 0.008066388, -0.029223593, -0.017965749, -0.01718576,
    0.015040791, -0.015599783, -0.021241704, 0.020058721, -0.03377353,
    0.00024232475, -0.0057881693, -0.028365605, 0.0021222204, -0.0100943595,
    -0.012297829, 0.008358884, -0.018225746, 0.02502465, -0.016132776,
    -0.02653263, -0.002733212, -0.01866774, 0.011959833, 0.0013381689,
    0.009587366, 0.039831445, -0.0010732976, 0.0023627172, 0.009106373,
    0.007104401, 0.0027543367, 0.026584629, 0.0011748587, -0.003087457,
    -0.015482784, 0.00251384, -0.009892862, -0.027585616, -0.017029762,
    -0.025427645, -0.04024744, 0.0004105099, -0.022697683, -0.027689613,
    -0.029171593, -0.02087771, -0.0053624255, 0.010100859, -0.014481798,
    0.0024212163, -0.008846377, -0.0030435827, -0.027481617, 0.008833377,
    0.00035993248, -0.015443785, -0.016977763, -0.025518645, 0.018524742,
    -0.021423701, 0.017588755, 0.008508381, 0.010640352, 0.013116817,
    -0.01860274, 0.021644698, 0.022632685, 0.0009489868, -0.043367397,
    0.033435535, -0.016990764, 0.021982694, 0.003672449, -0.0119923325,
    -0.00043386896, 0.007910389, -0.02083871, -0.0066299075, -0.016106775,
    -0.018550742, -0.022853682, -0.00028721476, -0.00859288, -0.0040656934,
    0.008059888, -0.01878474, 0.050387297, 0.00358145, -0.022164691,
    -0.0004277753, 0.05181728, -0.041287426, 0.02520665, -0.0077023925,
    0.014780794, -0.0076438934, 0.016613768, 0.0018037249, -0.019746725,
    -0.00502768, 0.016236775, 0.004468688, -0.0057166703, 0.0015136664,
    0.005612672, 0.039025456, 0.012876321, 0.029691586, 0.014637796,
    -0.006607158, -0.013084318, -0.01078335, -0.023568671, -0.04960731,
    -0.0076763933, -0.012031333, -0.010984847, 0.028937597, -0.019811723,
    -0.022528686, 0.041833416, -0.01580778, 0.048203327, 0.0065584085,
    0.020318717, 0.020630712, -0.02293168, -0.012109331, 0.01579478,
    -0.015209788, -0.005528173, 0.028963596, 0.0077218926, 0.002437466,
    -0.00050902413, -0.007247399, 0.004718934, -0.028963596, -0.018342745,
    0.008683879, 0.010386855, 0.019733725, -0.019798724, -0.0047969334,
    0.010438855, 0.005190178, -0.023555672, 0.010003361, -0.027585616,
    -0.005372175, -0.011426841, -0.0013885432, -0.02729962, 0.029873583,
    -0.013506812, -0.01153084, 0.026675628, -0.0006869592, -0.027195621,
    0.013493812, -0.020968707, 0.0356975, 0.0026877127, -0.013688809,
    0.029535588, -0.0072083995, 0.012629324, -0.013097318, 0.0047709337,
    0.028261606, 0.000003960882, -0.005684171, 0.009502867, 0.03372153,
    0.020565713, 0.0073643974, -0.021059707, 0.0010383605, -0.0045434367,
    0.01784875, 0.01650977, -0.013006318, -0.028417604, -0.028365605,
    -0.0025999637, -0.00216122, -0.0215797, 0.011316342, 0.0035002013,
    -0.0431334, -0.012271829, 0.0024114663, -0.004731934, 0.042483408,
    -0.008150887, -0.0020750961, 0.000324183, 0.035931498, -0.018511742,
    0.007045902, 0.016847765, 0.0053656753, -0.018563742, -0.005118679,
    0.0053039263, -0.02297068, 0.014156803, -0.009626366, -0.03756948,
    -0.022203691, 0.012304328, -0.01080935, 0.028287606, -0.016821766,
    -0.013227316, -0.015989777, 0.0012171081, -0.017029762, -0.022775684,
    0.014819793, 0.009190872, 0.017367758, 0.0016639768, 0.002811211,
    0.010419355, 0.00079380145, -0.0058499184, 0.013220816, -0.036009498,
    0.00573617, -0.025401646, 0.011751836, -0.04172942, -0.020461716,
    -0.013058318, 0.015950778, -0.017302759, 0.012011833, -0.009645865,
    -0.009756364, 0.007247399, 0.007624394, 0.012778822, 0.001547791,
    -0.016782766, -0.01718576, -0.015690781, -0.018238746, -0.010672851,
    -0.010939348, 0.0005329926, 0.030913569, 0.0028095858, -0.026987623,
    -0.010243857, 0.0055639227, -0.018563742, -0.00572967, -0.016236775,
    0.0062204134, 0.01076385, 0.021254703, 0.02943159, 0.010165858,
    0.0009985486, -0.0074228966, 0.0039031957, 0.0063471617, 0.023984665,
    -0.0051251785, 0.0040559433, -0.008202885, -0.014546798, -0.004107943,
    0.03010758, -0.0016428521, -0.0093728695, 0.0019840973, -0.020487715,
    0.023854667, -0.00025694954, -0.005531423, -0.011004346, -0.0045434367,
    -0.0033230786, -0.032525547, 0.0023903416, -0.014533797, 0.013987805,
    -0.024972653, 0.0066624074, 0.0044004386, -0.0013089193, 0.0036529491,
    -0.014754795, 0.01222633, 0.017393759, -0.021072706, 0.023334675,
    0.00859288, 0.0064869095, 0.022346688, 0.00859288, -0.01723776,
    -0.0143647995, -0.0140138045, -0.01644477, -0.0124668265, -0.005186928,
    -0.032031555, 0.02585664, -0.01929173, 0.017861752, -0.03317554,
    0.019538729, -0.014130803, 0.022697683, -0.049061317, 0.019005734,
    0.021202704, -0.0054989234, 0.006902904, -0.006386161, -0.0017322259,
    -0.0092493715, 0.0034937013, -0.013337814, -0.017471757, 0.0062691625,
    0.008963375, -0.0012650449, -0.008566881, -0.014702795, 0.0074293967,
    -0.019980721, 0.015729781, 0.20331717, -0.015664782, -0.01075735,
    0.026961625, -0.030029582, 0.009632866, 0.021410702, 0.0037634475,
    -0.00644141, 0.0067274063, -0.026857626, 0.012635824, -0.008033888,
    0.0031914555, 0.008410883, -0.022866681, -0.017692754, 0.0018297245,
    -0.007403397, -0.042093415, 0.012447326, -0.01074435, 0.012739822,
    -0.022086693, 0.015937777, -0.03447552, 0.014962791, -0.0056516714,
    0.025362646, 0.00572967, -0.0051934277, -0.032083552, -0.0033637031,
    -0.017796753, -0.013818808, 0.0039324453, 0.008066388, 0.0010139858,
    0.023984665, 0.01218083, -0.011543839, -0.0049789306, 0.009567867,
    -0.00430619, 0.029327592, 0.0072863987, -0.020279717, -0.026285633,
    0.0140138045, 0.0006390223, -0.034891512, 0.00014594328, 0.013032318,
    0.032837544, 0.00022973117, 0.013545811, 0.022099692, 0.01652277,
    -0.00066583446, -0.0032402049, -0.009476868, 0.03639949, -0.020318717,
    0.0027527118, 0.014065804, 0.011374841, -0.025557645, 0.0062041637,
    0.0096003665, -0.01076385, 0.018056748, -0.0009408619, -0.026779627,
    0.002219719, -0.015235788, -0.009080374, -0.0026373384, -0.009704364,
    0.017042762, 0.017159762, 0.0035911999, 0.0034059526, -0.015287787,
    -0.0029899583, 0.008924375, -0.003799197, 0.016574768, 0.01146584,
    -0.009782364, 0.011576339, -0.006298412, -0.0026015888, 0.0055639227,
    -0.0019223482, 0.020617712, 0.007455396, 0.006298412, -0.00094979926,
    -0.019824725, 0.0053039263, -0.012297829, -0.014000805, 0.022398688,
    0.012154831, -0.004036444, -0.009684865, -0.014754795, 0.013181817,
    0.028313605, -0.025596643, 0.027637616, 0.0021660947, 0.00573292,
    0.0023285926, -0.006889904, 0.011621838, 0.008345883, -0.0015819154,
    0.0010602977, -0.013766808, -0.012648824, -0.012063832, -0.00360095,
    0.0021352202, -0.013266315, -0.031043567, -0.00430944, 0.007845391,
    0.0002038331, -0.03444952, 0.044407383, -0.02502465, 0.02295768,
    0.0037471978, -0.004445938, 0.017107762, 0.018849738, -0.0153527865,
    -0.011823336, -0.023113677, -0.018082747, -0.0016282273, -0.010243857,
    -0.0039324453, -0.00068817794, -0.02237269, -0.008677379, -0.013123318,
    -0.026324634, -0.030497575, 0.005154428, 0.0041859415, -0.016847765,
    -0.013961806, 0.03676349, -0.03156356, -0.0215667, -0.0064804098,
    -0.005693921, 0.030003581, -0.01652277, 0.0024829654, 0.031121567,
    -0.00068289676, 0.008696879, 0.004442688, -0.16577369, -0.00086448796,
    0.0034709517, -0.013084318, 0.027793612, 0.0008023326, 0.018381745,
    0.011082346, -0.0154567845, 0.013870806, 0.0069419034, 0.029665587,
    -0.054651238, -0.012772322, 0.0056776707, -0.0077608917, -0.0048229326,
    0.00215472, 0.027585616, 0.012655323, 0.0069159037, -0.016119776,
    0.010373856, 0.0063439114, 0.012863321, 0.008833377, 0.0010700476,
    0.03327954, 0.006525909, 0.013350814, 0.0084043825, 0.00046758723,
    0.028261606, -0.0046344353, 0.024660656, 0.0071434006, 0.003451452,
    -0.014910792, -0.017302759, 0.013279315, -0.0031085818, -0.011290343,
    0.012460327, -0.0007539895, -0.010133359, 0.02077371, 0.020669712,
    -0.0027088372, 0.013350814, -0.0020360965, 0.011095345, -0.029951584,
    0.0010188608, -0.010120359, 0.018095748, 0.03647749, 0.029015595,
    0.0048359325, 0.0062854122, 0.0077933916, -0.005973417, -0.0287036,
    0.0040526935, -0.015313786, 0.00860588, 0.006308162, -0.0019548477,
    -0.0039129453, -0.031641558, 0.001434855, 0.00067192817, -0.0071759,
    0.0010009861, 0.0030338326, -0.000969299, 0.009431369, -0.04443338,
    0.014065804, -0.0030598324, -0.008833377, -0.010185358, 0.03013358,
    -0.016132776, -0.015495785, 0.015989777, -0.02293168, -0.016132776,
    -0.0042736903, -0.035333507, 0.00503093, 0.012102831, -0.032135554,
    -0.0056776707, -0.008924375, 0.023243677, 0.01075735, 0.0018865988,
    0.010107359, 0.013870806, -0.004816433, 0.015443785, 0.0078063915,
    -0.016860764, 0.033435535, 0.018095748, 0.041339424, -0.0031037068,
    0.014897793, 0.016834766, -0.0057166703, -0.0032694545, 0.0083003845,
    0.0009749864, 0.02943159, -0.02232069, 0.026285633, 0.020890709,
    -0.007994888, 0.027689613, 0.015157789, 0.06983503, 0.0024943403,
    -0.011563339, 0.012278329, -0.009444368, -0.019915722, -0.10202258,
    -0.016015777, 0.0070979013, 0.04531737, -0.018771738, 0.029041596,
    -0.027559616, 0.008150887, -0.023178678, 0.0058336686, 0.0016997263,
    -0.020006722, -0.011056346, -0.0061846636, 0.026727628, 0.015625782,
    -0.010308856, -0.009229871, 0.01074435, 0.00015599783, 0.017484756,
    0.012785322, -0.017029762, -0.0061391643, -0.0077738916, -0.008995875,
    -0.025596643, 0.013493812, 0.006298412, 0.034657516, -0.0034092024,
    -0.019161733, 0.008085887, -0.0036919485, -0.0015997902, 0.0032727043,
    -0.02646763, 0.0055541727, 0.02081271, -0.022515686, 0.01293482,
    -0.004748184, 0.023958666, -0.028027609, -0.002426091, -0.0005277114,
    -0.021163706, 0.010802849, 0.01653577, -0.025687642, -0.020435715,
    -0.004585686, -0.009262371, 0.01219383, 0.02722162, 0.0000019201393,
    0.024816655, -0.0038544463, -0.030263579, 0.009873362, 0.0011228593,
    0.0014998541, -0.0024813404, 0.020279717, -0.0075073955, 0.009665365,
    -0.032681543, -0.009899362, 0.014442799, -0.002221344, -0.006103415,
    -0.008092388, -0.020578714, 0.01298032, -0.04453738, -0.0068704044,
    -0.018472742, -0.010497354, 0.020331716, -0.031823557, -0.009554867,
    -0.020981709, 0.009138873, 0.013175316, 0.037049484, 0.030523574,
    0.021085706, -0.014507798, 0.026857626, -0.018836737, 0.008306884,
    0.017315758, 0.011173344, -0.044095386, -0.0044134385, 0.0069939024,
    0.01574278, 0.00789739, -0.0038511963, -0.0034774516, -0.022164691,
    -0.0020799711, -0.069367036, 0.036815487, 0.010081359, 0.00215472,
    0.004744934, -0.02800161, 0.01790075, 0.008449882, -0.016704768,
    0.014806794, -0.008885376, 0.0077478923, 0.011946834, -0.00080314506,
    -0.010354356, -0.026961625, -0.010211358, 0.0041924417, -0.014182802,
    0.009223372, 0.00018037249, 0.0034612017, -0.005235677, 0.023893667,
    -0.043991387, 0.0019142233, 0.010159358, -0.009119373, -0.022307688,
    -0.01148534, 0.04544737, -0.02445266, -0.0041111927, 0.058603182,
    -0.007344898, -0.03374753, -0.0029899583, 0.01288282, 0.011173344,
    0.026428632, -0.009613366, -0.03361753, 0.03665949, 0.0075918944,
    -0.0153527865, 0.013818808, -0.008293885, 0.005095929, 0.01292182,
    0.017419757, 0.0038576962, 0.02376367, 0.008274385, -0.0039876946,
    -0.004540187, -0.0041371924, 0.025661642, -0.005251927, 0.0064219106,
    -0.018758738, 0.014897793, 0.0074813957, 0.0056061717, -0.009561366,
    0.009216872, 0.03499551, -0.02078671, 0.009106373, -0.016249774,
    -0.00035891688, -0.015950778, 0.0028030858, 0.003808947, 0.029665587,
    0.018901737, -0.016886765, 0.008787878, -0.013025818, -0.01725076,
    0.023334675, -0.0042216913, -0.0057264203, -0.042067412, 0.0031817057,
    0.024504658, -0.0072928984, -0.01640577, 0.02363367, 0.0061326646,
    -0.0015551033, 0.015157789, 0.013493812, 0.006746906, -0.012128831,
    -0.0035717003, -0.00003097613, -0.02502465, -0.0019255981, 0.020903708,
    0.018472742, -0.013506812, -0.007325398, 0.019200733, -0.001466542,
    -0.027065624, 0.0020425965, -0.024036665, -0.04464138, -0.00575242,
    0.019902723, -0.014936792, -0.011121345, -0.002442341, 0.005947417,
    0.010835349, -0.000340839, 0.023750668, 0.0018914737, -0.0023919668,
    0.0073773973, -0.016704768, 0.034839515, 0.020240718, -0.009613366,
    0.03525551, 0.03730948, 0.0044849375, -0.0062789125, 0.004852182,
    0.018420743, 0.0007893327, -0.009788863, -0.014299801, 0.0013877307,
    -0.007910389, -0.0011334217, -0.013493812, -0.00033027664, -0.010867849,
    0.04167742, 0.0032678295, -0.016223773, 0.0100943595, -0.020968707,
    0.036139496, -0.0032775793, 0.010932848, -0.0074488963, 0.0008137074,
    0.036009498, -0.0039941943, 0.018472742, -0.0028502103, -0.033227537,
    -0.006535659, -0.019941723, 0.008378384, -0.0287036, -0.0076373937,
    0.024309661, -0.0005029305, 0.026025638, -0.009398869, -0.009236371,
    -0.007104401, 0.029561589, 0.0006662407, -0.016626768, -0.010633852,
    -0.010432355, 0.012824321, -0.0139098065, -0.024270661, 0.0073058982,
    -0.020214718, 0.0035067012, -0.014975792, -0.011615338, 0.0024342162,
    -0.018407743, 0.042665407, -0.011563339, -0.0144038, 0.007968889,
    -0.013266315, 0.002933084, -0.0034352022, -0.041235425,
  ];
  const prompt = `---- This is an Embedding of a picture. Provide a fileTitle (under 5 words, kebab case) and chose 1-3 tags from the following array that fits best. array: ${sampleTags}`;
  // make a button in the frontend to either discrimanete tags or create tags                                                                                                                                                                                                                    e
  try {
    const metadata = await getMetadata(JSON.stringify(embedding), prompt);
    console.log("Generated Metadata:", metadata);
  } catch (error) {
    console.error("Error in main function:", error);
  }
}

// export const assignTags = async (comment: string, prompt: string) => {
//   return await getMetadata(comment, prompt);
// };

main();

// test the same functionality with the embedding of the image instead of the description
